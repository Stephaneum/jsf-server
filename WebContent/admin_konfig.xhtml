<!DOCTYPE html>
<html 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<h:head>
		<title>Konfiguration#{konfig.suffixTitle}</title>
		<f:metadata>
    		<f:viewAction action="#{weiterleitung.noAdmin}" />
		</f:metadata>
		<f:event type="preRenderView" listener="#{konfig.addHeader}" />
		<link rel="icon" type="image/png" href="#{resource['/img/favicon.png']}" />
		<h:outputStylesheet library="css" name="#{konfig.css}" />
		<h:outputScript library="js" name="topMenu.js" />
		<h:outputScript library="js" name="topMenuEdit.js" />
		<style>
			.ui-fileupload-buttonbar {
				background:none;
				border:none;
			}
			
			.ui-fileupload-content {
				display:none;
			}
		</style>
	</h:head>
	
	<h:body style="background-color:#{themeService.backgroundColor};">
		<p:growl id="message" showDetail="true"/>
		
		<p:confirmDialog global="true">
			<div style="text-align:center">
				<p:commandButton value="Nein" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
				<p:commandButton value="Ja" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
			</div>
		</p:confirmDialog>
		
		<div id="hidden-div">
			
<!-- Side Menu -->
			<h:form id="sideMenu" style="position:fixed;">
				<p:menu model="#{sideMenu.model}" style="font-size:11pt;width:160px;"/>
			</h:form>
		
			<p:panel id="big-div" rendered="#{konfig.admin}">
					
<!-- Top Menu -->
				<h:form id="topMenuBar">
					<p:menubar styleClass="centeredMenuBar ui-widget-header ui-corner-all" model="#{topMenu.model}"
								style="top:0px;width:953px;position:fixed;transform: translateX(0%);z-index:+99;height:25px;" />
				</h:form>
				
				<br/><br/><br/>
				
				<h2 class="title" style="color:#4c4c4c;">Konfiguration</h2>
				
				<br/>
				
<!-- Ab hier beginnt cms.EditGruppe -->

				<h:form>
					<p:remoteCommand name="openGruppe" update="panelSelectGruppe" actionListener="#{editGruppe.openEdit}" oncomplete="PF('overlaySelectGruppe').show();" />
					<p:remoteCommand name="openLink" update="panelSelectLink" actionListener="#{editGruppe.openEdit}" oncomplete="PF('overlaySelectLink').show();" />
					<p:remoteCommand name="openNewGruppe" update="panelNewGruppe" actionListener="#{editGruppe.openNew}" oncomplete="PF('overlayNewGruppe').show();" />
					<p:remoteCommand name="openNewLink" update="panelNewLink" actionListener="#{editGruppe.openNew}" oncomplete="PF('overlayNewLink').show();" />
					<p:remoteCommand name="openNewRubrik" update="panelNewRubrik" actionListener="#{editGruppe.openNew}" oncomplete="PF('overlayNewRubrik').show();" />
				</h:form>
			
				<p:dialog id="panelSelectGruppe" header="Gruppe: #{editGruppe.selectGruppe}" width="700" widgetVar="overlaySelectGruppe" modal="true" resizable="false" closeOnEscape="true">
					
					<div class="ui-g">
			    		<div class="ui-g-6" style="text-align:center">
				    		<h2 class="title" style="color:#4c4c4c;">Daten ändern</h2>
							<br/>
							<h:form>
								<h:panelGrid columns="2" style="margin:auto">
									<p:outputLabel value="Name: " />
									<p:inputText value="#{editGruppe.newName}" required="true" requiredMessage="Sie müssen einen Namen eingeben" style="margin-left:20px"/>
									
									<p:outputLabel value="Priorität: " />
									<p:inputText value="#{editGruppe.newPriory}" required="true" requiredMessage="Sie müssen eine Priorität angeben" style="margin-left:20px"/>
									
									<p:outputLabel value="Passwort: " />
									<p:password value="#{editGruppe.newPassword}" placeholder="(kein Passwort)" style="margin-left:20px" redisplay="true"/>
								</h:panelGrid>
								<br/>
								<p:commandButton value="Änderungen speichern" action="#{editGruppe.save}" oncomplete="PF('overlaySelectGruppe').hide();bindStylesMenuEdit();bindStylesTop();"
													update="topMenuBar panelGruppe message" icon="ui-icon-disk"/>
								<br/><br/>
								<p:button href="home.xhtml?id=#{editGruppe.selectGruppeID}" value="in neuem Tab öffnen" target="_blank" icon="ui-icon-extlink"/>
								<br/><br/>
								<p:outputLabel value="Diese Gruppe ist als Startseite markiert." rendered="#{editGruppe.selectGruppeID eq editGruppe.defaultGruppe.gruppe_id}" style="color:green"/>
								<p:commandButton value="als Startseite festlegen" action="#{editGruppe.setDefaultGruppe}" oncomplete="PF('overlaySelectGruppe').show();bindStylesMenuEdit();"
												rendered="#{editGruppe.selectGruppeID ne editGruppe.defaultGruppe.gruppe_id}" update="panelSelectGruppe panelGruppe" icon="ui-icon-home" />
								
								<h:panelGroup layout="block" rendered="#{editGruppe.rubrikLeiter != null}">
									<br/><br/>
									<p:outputLabel value="#{editGruppe.rubrikLeiter} leitet diese Rubrik." style="color:green"/>
								</h:panelGroup>
								
								<h:panelGroup layout="block" rendered="#{editGruppe.passwordProtected}">
									<br/><br/>
									<p:outputLabel value="Diese Gruppe ist passwortgeschützt." style="color:green"/>
								</h:panelGroup>
							</h:form>
			    		</div>
			    		<div class="ui-g-6" style="text-align:center">
				    		<h2 class="title" style="color:#4c4c4c;">Gruppe löschen</h2>
							<h:form>
								<h:panelGrid id="input" columns="2" rendered="#{!editGruppe.correctPassword}" style="margin:auto">
									<p:outputLabel value="Ihr Passwort:" />
									<p:password value="#{editGruppe.password}" required="true" requiredMessage="Bitte geben Sie einen Passwort ein." style="margin-left:10px"/>
								</h:panelGrid>
								<h:outputText value="&lt;br/&gt;" escape="false" rendered="#{!editGruppe.correctPassword}"/>
								<p:outputLabel value="Falsches Passwort!&lt;br/&gt;&lt;br/&gt;" escape="false" rendered="#{editGruppe.errorPassword}" style="color:red"/>
								<p:commandButton value="Passwort überprüfen" oncomplete="PF('overlaySelectGruppe').show();" action="#{editGruppe.checkPassword}" rendered="#{!editGruppe.correctPassword}" update="panelSelectGruppe"/>
								<p:commandButton value="Gruppe löschen" action="#{editGruppe.delete}" rendered="#{editGruppe.correctPassword}" oncomplete="PF('overlaySelectGruppe').hide();bindStylesMenuEdit();bindStylesTop();"
													update="topMenuBar panelGruppe message" icon="fa fa-trash"/>
							</h:form>
							<br/><br/>
							Untergruppen, Links und Beiträge sind von der Löschung betroffen.
							<h:panelGroup layout="block" rendered="#{editGruppe.rubrikLeiter != null}">
								<br/><br/>
								<p:outputLabel value="Die Rubrik wird erst gelöscht," />
								<br/>
								<p:outputLabel value="wenn alle Gruppen und Links" />
								<br/>
								<p:outputLabel value="von dieser Rubrik gelöscht wurden." />
							</h:panelGroup>
							
			    		</div>
		    		</div>
					
					<br/>
					
				</p:dialog>
				
				<p:dialog id="panelSelectLink" header="Link: #{editGruppe.selectGruppe}" widgetVar="overlaySelectLink" modal="true" resizable="false" closeOnEscape="true">
					<h:form>
						<h:panelGrid columns="2">
							<p:outputLabel value="Name: " />
							<p:inputText value="#{editGruppe.newName}" required="true" requiredMessage="Sie müssen einen Namen eingeben" style="margin-left:20px"/>

							<p:outputLabel value="Priorität: " />
							<p:inputText value="#{editGruppe.newPriory}" required="true" requiredMessage="Sie müssen eine Priorität angeben" style="margin-left:20px"/>
							
							<p:outputLabel value="URL: " />
							<p:inputText value="#{editGruppe.newURL}" size="50" required="true" requiredMessage="Sie müssen eine URL eingeben" style="margin-left:20px"/>
						</h:panelGrid>
						<br/>
						<div style="text-align:center">
							<p:commandButton value="Änderungen speichern" action="#{editGruppe.save}" oncomplete="PF('overlaySelectLink').hide();bindStylesMenuEdit();bindStylesTop();" update="topMenuBar panelGruppe message" icon="ui-icon-disk"/>
							<br/>
							<br/>
							<p:commandButton value="Link löschen" action="#{editGruppe.delete}" oncomplete="PF('overlaySelectLink').hide();bindStylesMenuEdit();bindStylesTop();" update="topMenuBar panelGruppe message" icon="fa fa-trash"/>
						</div>
					</h:form>
				</p:dialog>
				
				<p:dialog id="panelNewGruppe" header="#{editGruppe.header}" widgetVar="overlayNewGruppe" modal="true" resizable="false" closeOnEscape="true">
					<h:form>
						<h:panelGrid columns="2" style="margin:auto">
							<p:outputLabel value="Name: " />
							<p:inputText value="#{editGruppe.newName}" required="true" requiredMessage="Sie müssen einen Namen eingeben" style="margin-left:20px"/>
							
							<p:outputLabel value="Priorität: " />
							<p:inputText value="#{editGruppe.newPriory}" required="true" requiredMessage="Sie müssen eine Priorität angeben" style="margin-left:20px"/>
						
							<p:outputLabel value="Passwort: " />
							<p:password value="#{editGruppe.newPassword}" placeholder="(kein Passwort)" style="margin-left:20px"/>
						</h:panelGrid>
						<br/>
						<div style="text-align:center">
							<p:commandButton value="Gruppe erstellen" action="#{editGruppe.create}" oncomplete="PF('overlayNewGruppe').hide();bindStylesMenuEdit();bindStylesTop();" update="topMenuBar panelGruppe message" />
						</div>
					</h:form>
				</p:dialog>
				
				<p:dialog id="panelNewLink" header="#{editGruppe.selectGruppe} / Neuer Link" widgetVar="overlayNewLink" modal="true" resizable="false" closeOnEscape="true">
					<h:form>
						<h:panelGrid columns="2" style="margin:auto">
							<p:outputLabel value="Name: " />
							<p:inputText value="#{editGruppe.newName}" required="true" requiredMessage="Sie müssen einen Namen eingeben" style="margin-left:20px"/>
							
							<p:outputLabel value="Priorität: " />
							<p:inputText value="#{editGruppe.newPriory}" required="true" requiredMessage="Sie müssen eine Priorität angeben" style="margin-left:20px"/>
							
							<p:outputLabel value="URL: " />
							<p:inputText value="#{editGruppe.newURL}" size="50" required="true" requiredMessage="Sie müssen eine URL eingeben" style="margin-left:20px"/>
						</h:panelGrid>
						<br/>
						<div style="text-align:center">
							<p:commandButton value="Link erstellen" action="#{editGruppe.create}" oncomplete="PF('overlayNewLink').hide();bindStylesMenuEdit();bindStylesTop();" update="topMenuBar panelGruppe message" />
						</div>
					</h:form>
				</p:dialog>
				
				<p:dialog id="panelNewRubrik" header="#{editGruppe.selectGruppe} / Neue Rubrik" widgetVar="overlayNewRubrik" modal="true" resizable="false" closeOnEscape="true">
					<h:form>
						<h:panelGrid columns="2" style="margin:auto">
						
							<p:outputLabel value="Rubrik: " />
							<p:selectOneMenu value="#{editGruppe.selectedRubrik}" effect="none" style="margin-left:20px">
								<f:selectItem itemLabel="Rubrik auswählen" itemValue="" noSelectionOption="false" />
								<f:selectItems value="#{editGruppe.rubrikenString}" label=""/>
							</p:selectOneMenu>
							
							<p:outputLabel value="Priorität: " />
							<p:inputText value="#{editGruppe.newPriory}" required="true" requiredMessage="Sie müssen eine Priorität angeben" style="margin-left:20px"/>
						</h:panelGrid>
						
						<br/>
						
						<div style="text-align:center">
							<p:outputLabel value="Dadurch genehmigen Sie die Rubrik." style="color:green" />
							<br/><br/>
							<p:commandButton value="Rubrik einfügen" action="#{editGruppe.createRubrik}" oncomplete="PF('overlayNewRubrik').hide();bindStylesMenuEdit();bindStylesTop();" update="topMenuBar panelGruppe message" />
						</div>
					</h:form>
				</p:dialog>
				
				<p:panel id="panelGruppe" header="Menü verwalten">
					<br/>
					<p:outputLabel value="Hier können Sie die obere Menüleiste bearbeiten."/>
					<br/>
					<p:outputLabel value="Je höher die "/>
					<p:outputLabel style="font-weight: bold;" value="Priorität"/>
					<p:outputLabel value=", desto weiter oben/links wird es angezeigt."/>
					<br/>
					<br/>
					<h:form style="height:25px;">
						<p:menubar styleClass="ui-widget-header ui-corner-all" model="#{editGruppe.model}" />
					</h:form>
					
					<br/><br/><br/>
					
					<h:form>
						<div class="ui-g">
			    			<div class="ui-g-4">
			    				<p:outputLabel value="Startseite: " style="margin-left:20px"/>
								<p:outputLabel value="keine festgelegt" style="font-weight:bold" rendered="#{editGruppe.defaultGruppe == null}" />
								<p:outputLabel value="#{editGruppe.defaultGruppe.name}" style="font-weight:bold" rendered="#{editGruppe.defaultGruppe != null}" />
			    			</div>
			    			
			    			<div class="ui-g-8" style="text-align:right">
			    				<p:outputLabel value="Alle Beiträge auf der Startseite anzeigen" style="margin-left:150px"/>
					
								<p:selectBooleanButton update="@form" value="#{editGruppe.mergeAktuelles}" onLabel="ja" offLabel="nein" onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:90px;margin-left:30px;" >
									<p:ajax update="message" listener="#{konfig.toggle}" />
								</p:selectBooleanButton>
			    			</div>
			    		</div>
						
					</h:form>
					
					<br/><br/>
				</p:panel>
				
				<br/><br/>
				
				<p:panel id="slides" header="Diashow konfigurieren">
					<br/>
					<h:form enctype="multipart/form-data">
	    				<p:fileUpload label="Hochladen" fileUploadListener="#{slideBean.upload}"
                   							update="slides message" auto="true"
                   							onstart="PF('overlayLoad').show()" oncomplete="PF('overlayLoad').hide()"/>
					</h:form>
					<br/>
					<h:form>
						<p:dataTable id="slides-table" value="#{slideBean.slides}" var="r" emptyMessage="Keine Bilder vorhanden">
		
							<p:column headerText="Bild" style="text-align: center;">
								<img src="slider/?file=#{r.fileName}" style="width: 100%"/>
							</p:column>
							<p:column headerText="Titel" style="text-align: center;">
								<p:inputText value="#{r.title}" placeholder="(leer)" style="width: 95%" required="false" />
							</p:column>
							<p:column headerText="Untertitel" style="text-align: center;">
								<p:inputText value="#{r.sub}" placeholder="(leer)"  style="width: 95%" required="false" />
							</p:column>
							<p:column headerText="Animation" style="text-align: center;">
								<p:commandButton action="#{slideBean.changeDirection(r)}" update="@this" value="#{r.directionReadable}"/>
							</p:column>
							<p:column headerText="Aktionen" style="text-align: center;">
								<p:commandButton action="#{slideBean.moveUp(r)}" update="slides-table message" icon="fa fa-arrow-up" onstart="PF('overlayLoad').show()" oncomplete="PF('overlayLoad').hide()"/>
								<p:commandButton action="#{slideBean.moveDown(r)}" update="slides-table message" icon="fa fa-arrow-down" onstart="PF('overlayLoad').show()" oncomplete="PF('overlayLoad').hide()"/>
								<p:commandButton action="#{slideBean.delete(r)}" update="slides-table message" icon="fa fa-trash" onstart="PF('overlayLoad').show()" oncomplete="PF('overlayLoad').hide()"/>
							</p:column>
						</p:dataTable>
						<br/>
						<div style="text-align: right">
							<p:commandButton action="#{slideBean.save}" value="Änderungen speichern" update="@form message" icon="fa fa-floppy-o" onstart="PF('overlayLoad').show()" oncomplete="PF('overlayLoad').hide()"/>
						</div>
						<br/>
					</h:form>
				</p:panel>
				
				<br/><br/>
				
<!-- Ab hier beginnt theme.themeSwitcherView (THEMES) -->
				
				<p:panel id="theme" header="Oberfläche einstellen">
					<br/>
					Hier können Sie das allgemeine Aussehen verändern.
					
					<br/><br/>
					
					<h:form>
						Voreinstellungen: <p:commandButton value="helles Design" action="#{themeService.applyWhiteTheme}" ajax="false" style="margin-left: 20px" />
						<p:commandButton value="grünes Design" action="#{themeService.applyGreenTheme}" ajax="false" style="margin-left: 20px" />
						<p:commandButton value="Design zurücksetzen" action="#{themeSwitcherView.restoreTheme}" ajax="false" style="float:right" />
						<br/><br/>
						<p:tabView>
							<p:tab title="Hintergrundfarbe (öffentlich)">
								<h:panelGrid columns="2" cellpadding="5">
									<h:outputText value="allgemeine Hintergrundfarbe:" />
									<p:colorPicker value="#{themeService.backgroundPublicColor}" mode="inline" />
								</h:panelGrid>
								<br/><br/>
								<h:panelGrid columns="2" cellpadding="5">
									<h:outputText value="Farbe Fußzeile:" />
									<p:colorPicker value="#{themeService.footerColor}" mode="inline" />
								</h:panelGrid>
							</p:tab>
					        <p:tab title="Navigationsleiste">
					            <h:panelGrid columns="2" cellpadding="5">
									<h:outputText value="Hintergrundfarbe:" />
									<p:colorPicker value="#{themeService.navbarColor}" mode="inline" />
								</h:panelGrid>
								
								<br/><br/>
								<h:panelGrid columns="2" cellpadding="5">
									<h:outputText value="Hintergrundfarbe geöffnete Navigationsleiste:" />
									<p:colorPicker value="#{themeService.navbarDropdownColor}" mode="inline" />
								</h:panelGrid>
								
								<br/><br/>
								<h:panelGrid columns="2" cellpadding="5">
									<h:outputText value="Text-Farbe:" />
									<p:colorPicker value="#{themeService.navbarTextColor}" mode="inline" />
								</h:panelGrid>
								
								<br/><br/>
								
								<p:selectBooleanButton update="@this" value="#{themeService.logoColored}" onLabel="grünes Logo" offLabel="weißes Logo" onIcon="fa fa-paint-brush" offIcon="fa fa-paint-brush" >
									<p:ajax update="message" listener="#{konfig.doNothing}" />
								</p:selectBooleanButton>
								
								<br/><br/>
								
								<p:selectBooleanButton update="@this" value="#{themeService.loginButtonColored}" onLabel="farbiges Login-Button" offLabel="weißes Login-Button" onIcon="fa fa-paint-brush" offIcon="fa fa-paint-brush" >
									<p:ajax update="message" listener="#{konfig.doNothing}" />
								</p:selectBooleanButton>
								
					        </p:tab>
					        <p:tab title="Beiträge">
								<h:panelGrid columns="2" cellpadding="5">
									<h:outputText value="Hintergrundfarbe der Beiträge-Liste:" />
									<p:colorPicker value="#{themeService.beitragListColor}" mode="inline" />
								</h:panelGrid>
					
								<br/><br/>
					
								<h:panelGrid columns="2" cellpadding="5">
									<h:outputText value="Text-Farbe:" />
									<p:colorPicker value="#{themeService.beitragTextColor}" mode="inline" />
								</h:panelGrid>
					        </p:tab>
					        <p:tab title="Weitere">
								<h:panelGrid columns="2" cellpadding="5">
									<h:outputText value="Farbe Vertretungsplan-Button etc.:" />
									<p:colorPicker value="#{themeService.leftButtonColor}" mode="inline" />
								</h:panelGrid>
							
								<br/><br/>
							
								<h:panelGrid columns="2" cellpadding="5">
									<h:outputText value="Farbe Vertretungsplan-Button etc. (aktiv):" />
									<p:colorPicker value="#{themeService.leftButtonColorOn}" mode="inline" />
								</h:panelGrid>
							
								<br/><br/>
							
								<h:panelGrid columns="2" cellpadding="5">
									<h:outputText value="Farbe der restlichen Buttons:" />
									<p:colorPicker value="#{themeService.buttonColor}" mode="inline" />
								</h:panelGrid>
							
								<br/><br/>
								
								<h:panelGrid columns="2" cellpadding="5">
									<h:outputText value="Farbe bei den Statistiken:" />
									<p:colorPicker value="#{themeService.diagramColor}" mode="inline" />
								</h:panelGrid>
					
					        </p:tab>
					        <p:tab title="Intern">
						        <h:panelGrid columns="2" cellpadding="5">
									<p:outputLabel for="themeSwitcher" value="Design:" />
									<p:themeSwitcher id="themeSwitcher" style="width:165px" effect="none">
										<f:selectItem itemLabel="Aussehen auswählen" itemValue="" />
									    <f:selectItems value="#{themeSwitcherView.themes}"/>
									    <p:ajax global="false" listener="#{themeSwitcherView.saveTheme}" />
									</p:themeSwitcher>
								</h:panelGrid>
								
								<br/><br/>
								
						        <h:panelGrid columns="2" cellpadding="5">
									<h:outputText value="Hintergrundfarbe der Seite:" />
									<p:colorPicker value="#{themeService.backgroundColor}" mode="inline" />
								</h:panelGrid>
					
								<br/><br/>
					
								<h:panelGrid columns="2" cellpadding="5">
									<h:outputText value="Hintergrundfarbe des mittleren Bereiches:" />
									<p:colorPicker value="#{themeService.panelColor}" mode="inline" />
								</h:panelGrid>
					        </p:tab>
					    </p:tabView>
					    <br/>
					    
					    <div style="text-align: right">
					    	<p:commandButton value="Änderungen speichern" action="#{themeService.save}" ajax="false" />
					    </div>
					</h:form>
				    
					<br/><br/>
					
				</p:panel>
				
				<br/><br/>
				
<!-- Ab hier beginnt managedBean.einrichtung (VARIABLEN) -->
				
				<p:panel id="modelVar" header="Variablen verwalten">
					<br/>
					<p:outputLabel value="Hier sind einige globale Variablen des gesamten Systems aufgeführt."/>
					
					<br/>
					<br/>
				
					<h:form>
						<p:commandButton value="Speicherplatz" oncomplete="PF('overlaySpeicher').show();" update="panelSpeicher" />
						<p:commandButton value="Speicherort" style="margin-left:50px" oncomplete="PF('overlaySpeicherort').show();" update="panelSpeicherort"/>
						<p:commandButton value="E-Mail-Timeout" style="margin-left:50px" oncomplete="PF('overlayEmailTimeout').show();" update="panelEmailTimeout" />
						<p:commandButton value="Vertretungsplan" action="#{variables.openKonfigVertretung}" ajax="false" style="margin-left:50px"/>
					</h:form>
					<br/>
					<h:form>
						<p:commandButton value="max. Bildgröße" oncomplete="PF('overlayPictureSize').show();" update="panelPictureSize"/>
						<p:commandButton value="Port 8080 auf 80" style="margin-left:50px" oncomplete="PF('overlayPort').show();" update="panelPort"/>
						<p:commandButton value="Dummys" style="margin-left:50px" oncomplete="PF('overlayDummy').show();" update="panelDummy"/>
						<p:commandButton value="Backup-Ordner" style="margin-left:50px" oncomplete="PF('overlayBackupDir').show();" update="panelBackupDir"/>
					</h:form>
					<br/>
				</p:panel>
				
				<p:dialog id="panelSpeicher" header="Standard-Speicherplatz ändern" widgetVar="overlaySpeicher" modal="true" resizable="false" closeOnEscape="true">
					<p:messages showDetail="false" closable="true"/>
					<br/>
					<h:form>
						<h:panelGrid columns="4" cellpadding="5">
							
								<p:outputLabel value="Lehrer/innen:"/>
								<p:inputText size="10"
									value="#{variables.speicherLehrer}"
									requiredMessage="Du musst einen Speicherplatz angeben"
									rendered="true" />
								<p:selectOneMenu value="#{variables.sizeTypeLehrer}" style="width:150px;" effect="none">
									<f:selectItem itemLabel="Größe festlegen" itemValue="" noSelectionOption="false" />
									<f:selectItems value="#{variables.sizes}" />
								</p:selectOneMenu>
								<p:outputLabel value="(aktuell: #{variables.lastSpeicherLehrer})"/>
								
								<p:outputLabel value="Schüler/innen:"/>
								<p:inputText size="10"
									value="#{variables.speicherSchueler}"
									requiredMessage="Du musst einen Speicherplatz angeben"
									rendered="true" />
								<p:selectOneMenu value="#{variables.sizeTypeSchueler}" style="width:150px;" effect="none">
									<f:selectItem itemLabel="Größe festlegen" itemValue="" noSelectionOption="false" />
									<f:selectItems value="#{variables.sizes}" />
								</p:selectOneMenu>
								<p:outputLabel value="(aktuell: #{variables.lastSpeicherSchueler})"/>
						</h:panelGrid>
						
						<br/>
						
						<div align="center">
							<p:outputLabel value="Diese Änderung betrifft nur zukünftige Nutzer, die sich neu registrieren."/>
							<br/><br/><br/>
							
							<p:commandButton value="Speicherplatz aktualisieren" action="#{variables.updateSpeicherPlatz}" oncomplete="PF('overlaySpeicher').hide();" update="message" />
						</div>
						
					</h:form>
					<br/>
				</p:dialog>
				
				<p:dialog id="panelSpeicherort" header="Speicherort ändern" widgetVar="overlaySpeicherort" modal="true" resizable="false" closeOnEscape="true">
					<p:messages showDetail="false" closable="true"/>
					<h:form>
						<br/>
						<div style="text-align:center">
							<p:outputLabel value="Diese Funktion ist nützlich, wenn Sie z.B. von einem Backup auf ein neues System installieren."/>
						</div>
						<br/>
						<br/>
						<h:panelGrid columns="2" cellpadding="5" style="margin:auto">
							
								<p:outputLabel value="Ordnerpfad"/>
								<p:inputText style="width:300px"
									value="#{variables.speicherort}"
									requiredMessage="Du musst einen Speicherort angeben"
									rendered="true" />
						</h:panelGrid>
						
						<br/>
						
						<div align="center">
							<p:outputLabel value="Geben Sie bitte den Pfad für den Speicherort des Privat-/Projekt-/Klassenspeicher an."/>
					
							<br/>
							<p:outputLabel value="z.B. "/>
							<p:outputLabel value="/home/projekt/datenbank" style="font-style: italic;font-weight:bold"/>
							<p:outputLabel value=" oder "/>
							<p:outputLabel value="C:\Users\Projekt\Datenbank" style="font-style: italic;font-weight:bold"/>
							<br/>
							<p:outputLabel value="Dieser Ordner muss vorher manuell erstellt werden."/>
							<br/>
							<p:outputLabel value="Stellen Sie sicher, dass Tomcat Zugriffsrechte auf diesen Ordner hat."/>
							<br/><br/><br/>
							<p:outputLabel style="color:red;" value="Alle Dateien werden NICHT verschoben und NICHT gelöscht." /><br/>
							<p:outputLabel style="color:red;" value="Der Dateipfad in der Datenbank wird nur aktualisiert." />
							
							<br/><br/><br/><br/>
						
							<p:commandButton value="Speicherort aktualisieren" action="#{variables.updateSpeicherort}" oncomplete="PF('overlaySpeicherort').hide();" update="@all"/>
						</div>
						
					</h:form>
					<br/>
				</p:dialog>
				
				<p:dialog id="panelEmailTimeout" header="E-Mail-Timeout ändern" widgetVar="overlayEmailTimeout" modal="true" resizable="false" closeOnEscape="true">
					<p:messages showDetail="false" closable="true"/>
					<br/>
					<h:form>
						<h:panelGrid columns="2" cellpadding="5" style="margin:auto;">
							
							<p:outputLabel value="E-Mail-Timeout (in h):"/>
							<p:inputText
								value="#{variables.emailTimeout}"
								required="true" 
								requiredMessage="Du musst einen Zugangscode eingeben"
								rendered="true" />
							
						</h:panelGrid>
						
						<br/>
						
						<div align="center">
							<p:outputLabel value="Gibt die Zeit an, bis der Bestätigungscode"/>
							<br/>
							<p:outputLabel value="für das Zurücksetzen des Passworts gelöscht wird."/>
							<br/><br/><br/>
						
							<p:commandButton value="E-Mail-Timeout aktualisieren" action="#{variables.updateEmailTimeout}" oncomplete="PF('overlayEmailTimeout').hide();" update="message" />
						</div>
						
					</h:form>
					<br/>
				</p:dialog>
				
				<p:dialog id="panelPictureSize" header="Maximale Bildgröße ändern" widgetVar="overlayPictureSize" modal="true" resizable="false" closeOnEscape="true">
					<p:messages showDetail="false" closable="true"/>
					
					<br/>
					
					<h:form>
						
						<div align="center">
							<h:panelGrid columns="3" cellpadding="5">
									<p:inputText size="10"
										value="#{variables.pictureSize}"
										requiredMessage="Du musst einen Speicherplatz angeben"/>
									<p:selectOneMenu value="#{variables.sizeTypePictureSize}" style="width:150px;" effect="none">
										<f:selectItem itemLabel="Größe festlegen" itemValue="" noSelectionOption="false" />
										<f:selectItems value="#{variables.sizes}" />
									</p:selectOneMenu>
									<p:outputLabel value="(aktuell: #{variables.lastPictureSize})"/>
							</h:panelGrid>
							
							<br/>
							
							<p:outputLabel value="In Beiträgen dürfen Bilder nur eine bestimmte Größe besitzen."/>
							<br/>
							<p:outputLabel value="Es wird eine Warnung ausgegeben, falls die Größe überschritten wurde."/>
							<br/><br/>
							<p:outputLabel value="Falls die Warnung ignoriert wird,"/>
							<br/>
							<p:outputLabel value="werden zu große Bilder in Beiträgen automatisch verkleinert."/>
							<br/><br/><br/>
							
							<p:commandButton value="Bildgröße aktualisieren" action="#{variables.updatePictureSize}" oncomplete="PF('overlaySpeicher').hide();" update="panelPictureSize message" />
						</div>
						
					</h:form>
					<br/>
				</p:dialog>
				
				<p:dialog id="panelPort" header="Port-Weiterleitung" widgetVar="overlayPort" modal="true" resizable="false" closeOnEscape="true">
					
					<div style="text-align:center;">
						<h:form>
							<p:messages showDetail="true" closable="true"/>
							<br/>
							<p:outputLabel value="Alle Nutzer von Port 8080 auf Port 80 weiterleiten"/>
						
							<p:selectBooleanButton update="@form" value="#{variables.redirectPort}" onLabel="ja" offLabel="nein" onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:90px;margin-left:30px;" >
								<p:ajax update="@form" listener="#{konfig.toggle}" />
							</p:selectBooleanButton>
							<br/><br/>
							<p:outputLabel value="Es wird davon ausgegangen, dass Port 80 und 8080 verfügbar sind." style="font-style: italic;"/>
						</h:form>
					</div>
					
					<br/>
				</p:dialog>
				
				<p:dialog id="panelDummy" header="Reiter: Dummy" widgetVar="overlayDummy" modal="true" resizable="false" closeOnEscape="true">
					
					<div style="text-align:center;">
						<h:form>
							<p:messages showDetail="true" closable="true"/>
							<br/>
							<p:outputLabel value="Dummys auf dem linken Menü anzeigen: "/>
						
							<p:selectBooleanButton update="@form" value="#{variables.showDummy}" onLabel="ja" offLabel="nein" onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:90px;margin-left:30px;" >
								<p:ajax update="@form sideMenu" listener="#{konfig.toggle}" />
							</p:selectBooleanButton>
							<br/><br/>
							<p:outputLabel value="Bei jedem Systemstart ist dieser Eintrag standardmäßig deaktiviert." style="font-style: italic;"/>
						</h:form>
					</div>
					
					<br/>
				</p:dialog>
				
				<p:dialog id="panelBackupDir" header="Backup-Ordner ändern" widgetVar="overlayBackupDir" modal="true" resizable="false" closeOnEscape="true">
					<p:messages showDetail="false" closable="true"/>
					<h:form>
						<br/>
						<h:panelGrid columns="2" cellpadding="5" style="margin:auto">
							
								<p:outputLabel value="Ordnerpfad"/>
								<p:inputText style="width:300px"
									value="#{variables.backupDir}"
									requiredMessage="Du musst einen Pfad angeben"
									rendered="true" />
						</h:panelGrid>
						
						<br/>
						
						<div align="center">
							<p:outputLabel value="Geben Sie bitte den Pfad für die Backups an."/>
					
							<br/>
							<p:outputLabel value="z.B. "/>
							<p:outputLabel value="/home/projekt/backup" style="font-style: italic;font-weight:bold"/>
							<p:outputLabel value=" oder "/>
							<p:outputLabel value="C:\Users\Projekt\backup" style="font-style: italic;font-weight:bold"/>
							<br/>
							<p:outputLabel value="Dieser Ordner muss vorher manuell erstellt werden."/>
							<br/>
							<p:outputLabel value="Stellen Sie sicher, dass Tomcat Zugriffsrechte auf diesen Ordner hat."/>
							
							<br/><br/><br/><br/>
						
							<p:commandButton value="Pfad aktualisieren" action="#{variables.updateBackupDir}" oncomplete="PF('overlayBackupDir').hide();" update="message"/>
						</div>
						
					</h:form>
					<br/>
				</p:dialog>
				
				<p:dialog widgetVar="overlayLoad" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
					<h2 class="title" style="text-align:center">Bitte warten</h2>
				    <p:graphicImage url="resources/img/ajax-loader.gif" />
				</p:dialog>
				
				<br/>
			</p:panel>
			<br/>
			<div id="bottom">
				<h:link outcome="kontakt" styleClass="ui-link ui-widget" style="font-size:10pt;color:#125100;text-decoration:none;" value="Kontakt"/>
				<p:outputLabel style="font-size:10pt" value=" | "/>
				<h:link outcome="impressum" styleClass="ui-link ui-widget" style="font-size:10pt;color:#125100;text-decoration:none;" value="Impressum"/>
				<p:outputLabel style="font-size:10pt" value=" | "/>
				<h:link outcome="sitemap" styleClass="ui-link ui-widget" style="font-size:10pt;color:#125100;text-decoration:none;" value="Sitemap"/>
				<br/><br/>
				<h:outputText style="font-size:12pt;word-wrap: break-word;" escape="false" value="#{konfig.bottomText}"/>
			</div>
			<br/>
		</div>
	</h:body>
</html>