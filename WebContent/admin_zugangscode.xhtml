<!DOCTYPE html>
<html 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<h:head>
		<title>Zugangscodes#{konfig.suffixTitle}</title>
		<f:metadata>
    		<f:viewAction action="#{weiterleitung.noAdmin}" />
		</f:metadata>
		<f:event type="preRenderView" listener="#{konfig.addHeader}" />
		<link rel="icon" type="image/png" href="#{resource['/img/favicon.png']}" />
		<h:outputStylesheet library="css" name="#{konfig.css}" />
		<h:outputScript library="js" name="topMenu.js" />
	</h:head>
	
	<h:body style="background-color:#{themeService.backgroundColor};">
		<p:growl id="message" showDetail="true"/>
	
		<div id="hidden-div">
		
<!-- Side Menu -->
			<h:form style="position:fixed;">
				<p:menu model="#{sideMenu.model}" style="font-size:11pt;width:160px;"/>
			</h:form>
		
			<p:panel id="big-div" rendered="#{konfig.admin}">
					
<!-- Top Menu -->
				<h:form>
					<p:menubar styleClass="centeredMenuBar ui-widget-header ui-corner-all" model="#{topMenu.model}"
								style="top:0px;width:953px;position:fixed;transform: translateX(0%);z-index:+99;height:25px;" />
				</h:form>
				
				<br/><br/><br/>
				
				<h2 class="title" style="color:#4c4c4c;">Zugangscodes</h2>
				
				<br/>
						
<!-- Zugangscodes Tabelle -->
				<p:panel header="Zugangscodes erstellen">
					<h:form>
						<h:panelGrid columns="2">
							Anzahl:
							<p:inputText style="width:230px"
								value="#{zugangscodeBean.anzahl}"/>
							
							Rang:
							<p:selectOneMenu value="#{zugangscodeBean.rang}" style="width:210px" effect="none">
								<f:selectItem itemLabel="Rang auswählen" itemValue="" noSelectionOption="false" />
								<f:selectItems value="#{zugangscodeBean.rangList}" />
							</p:selectOneMenu>
						</h:panelGrid>
						<br/>
						<p:commandButton value="Bestätigen" action="#{zugangscodeBean.generate}" update="@all"/>
					</h:form>
				</p:panel>
				<br/><br/><br/>
				<p:panel id="tableZugangscodes" header="Zugangscodes">
				
					<f:facet name="header">
						<p:outputLabel value="Ansicht:"/>
	                    <p:commandButton value="Tabelle" action="#{zugangscodeBean.setTextMode(false)}" disabled="#{!zugangscodeBean.textMode}" update="tableZugangscodes" style="margin-left:30px"/>
	                    <p:commandButton value="Text" action="#{zugangscodeBean.setTextMode(true)}" disabled="#{zugangscodeBean.textMode}" update="tableZugangscodes" style="margin-left:10px"/>
	                </f:facet>
	                <br/>
					<p:dataTable value="#{zugangscodeBean.mergedZugangscode}" var="r" emptyMessage="Keine unbenutzte Zugangscodes verfügbar" rendered="#{!zugangscodeBean.textMode}">
						<p:column headerText="Zugangscodes für Lehrer (#{zugangscodeBean.anzahlLehrer})" style="text-align:center">
							
							<h:form rendered="#{not empty r[0]}">
								#{r[0]}
								<p:commandButton id="btnDelete" action="#{zugangscodeBean.deleteZugangscode(r[0])}" update="tableZugangscodes message" style="margin-left:10px;" icon="fa fa-trash" />
							</h:form>
							
						</p:column>
						<p:column headerText="Zugangscodes für Schüler (#{zugangscodeBean.anzahlSchueler})" style="text-align:center">
							
							<h:form rendered="#{not empty r[1]}">
								#{r[1]}
								<p:commandButton id="btnDelete" action="#{zugangscodeBean.deleteZugangscode(r[1])}" update="tableZugangscodes message" style="margin-left:10px;" icon="fa fa-trash" />
							</h:form>
							
						</p:column>
						<p:column headerText="Zugangscodes für Gäste (#{zugangscodeBean.anzahlGast})" style="text-align:center">
							
							<h:form rendered="#{not empty r[2]}">
								#{r[2]}
								<p:commandButton id="btnDelete" action="#{zugangscodeBean.deleteZugangscode(r[2])}" update="tableZugangscodes message" style="margin-left:10px;" icon="fa fa-trash" />
							</h:form>
							
						</p:column>
						
					</p:dataTable>
					
					<p:outputLabel value="Dieser Modus eignet sich für das Kopieren in den Zwischenspeicher" rendered="#{zugangscodeBean.textMode}" />
					<br/><br/>
					<p:inputTextarea id="logs" style="overflow:scroll;width:99%" value="#{zugangscodeBean.codeText}" rendered="#{zugangscodeBean.textMode}" readonly="true"/>
				</p:panel>
	    		<br/>
	    		<br/>
			</p:panel>
			<br/>
			<div id="bottom">
				<h:link outcome="kontakt" styleClass="ui-link ui-widget" style="font-size:10pt;color:#125100;text-decoration:none;" value="Kontakt"/>
				<p:outputLabel style="font-size:10pt" value=" | "/>
				<h:link outcome="impressum" styleClass="ui-link ui-widget" style="font-size:10pt;color:#125100;text-decoration:none;" value="Impressum"/>
				<p:outputLabel style="font-size:10pt" value=" | "/>
				<h:link outcome="sitemap" styleClass="ui-link ui-widget" style="font-size:10pt;color:#125100;text-decoration:none;" value="Sitemap"/>
				<br/><br/>
				<h:outputText style="font-size:12pt;word-wrap: break-word;" escape="false" value="#{konfig.bottomText}"/>
			</div>
			<br/>
		</div>
	</h:body>
</html>