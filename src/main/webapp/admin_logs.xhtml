<!DOCTYPE html>
<html 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<h:head>
		<title>Logbuch#{konfig.suffixTitle}</title>
		<f:metadata>
    		<f:viewAction action="#{weiterleitung.noAdmin}" />
		</f:metadata>
		<f:event type="preRenderView" listener="#{konfig.addHeader}" />
		<link rel="icon" type="image/png" href="#{resource['/img/favicon.png']}" />
		<h:outputStylesheet library="css" name="#{konfig.css}" />
		<h:outputScript library="js" name="topMenu.js" />
	</h:head>
	
	<h:body style="background-color:#{themeService.backgroundColor};">
		<p:growl id="message" showDetail="true"/>
		
		<div id="hidden-div">
			
<!-- Side Menu -->
			<h:form style="position:fixed;">
				<p:menu model="#{sideMenu.model}" style="font-size:11pt;width:160px;"/>
			</h:form>
		
			<p:panel id="big-div" rendered="#{konfig.admin}">
					
<!-- Top Menu -->
				<h:form>
					<p:menubar styleClass="centeredMenuBar ui-widget-header ui-corner-all" model="#{topMenu.model}"
								style="top:0px;width:953px;position:fixed;transform: translateX(0%);z-index:+99;height:25px;" />
				</h:form>
				
				<br/><br/><br/>
				<h2 class="title" style="color:#4c4c4c;">Logbuch</h2>
				<p:outputLabel id="logsAmount" value="#{logBean.logAmount} Einträge" style="display:block;margin-left:130px;margin-top: -47px"/>
				<br/>
				<div class="ui-g">
					    <div class="ui-g-7">
					    	<p:outputLabel style="font-weight:bold;color:#4c4c4c;" value="Das System notiert sich folgende Ereignisse:"/>
							<br/><br/>
							Login, Registrierung, Datei-Upload, Datei löschen, Beitrag erstellen, Beitrag bearbeiten, Beitrag genehmigen, Projekt erstellen, Projekt beitreten, Projekt verlassen, Projekt löschen, Klasse beitreten, Klasse verlassen
					    </div>
					    <div class="ui-g-5">
					    	<p:outputLabel style="font-weight:bold;color:#4c4c4c;" value="Logdaten löschen:"/>
							<br/><br/>
							<h:form>
								<p:outputLabel value="älter als "/>
								<p:inputNumber value="#{logBean.days}" size="11" symbol=" Tage" decimalPlaces="0" symbolPosition="s" thousandSeparator="" required="true" requiredMessage="Eingabe ist leer"/>
								<p:commandButton style="margin-left:10px" value="löschen" action="#{logBean.clearLogs}" update="@all"/>
							</h:form>
							
							<br/>
							
							Hinweis: Bei 0 Tagen wird alles gelöscht.
					    </div>
				</div>
				<br/>
				<br/>
				<h:form id="input">
					<p:panel header="Einschränkung" rendered="#{logBean.enableTypes}">
						<br/>
				        <p:selectCheckboxMenu id="auswahl" style="display:block;" value="#{logBean.selectedTypes}" label="Auswählen" multiple="true">
				            <f:selectItems value="#{logBean.types}" />
				        </p:selectCheckboxMenu>
				        <br/>
				        
				        <div class="ui-g">
				        	<div class="ui-g-8">
				        	Hier können Sie die Menge der Ereignisse einschränken.
				        	</div>
				        	<div class="ui-g-4" style="text-align:right;">
				        	<p:commandButton value="Aktualisieren" action="#{logBean.reload}" update="logs logsAmount message"/>
				        	</div>
				        </div>
					</p:panel>
				</h:form>
				
				<br/>
				
				<div class="ui-g">
				    <div class="ui-g-8">
				    	<h:form>
							<div style="text-align:center">
								<p:selectOneButton value="#{logBean.onlyShowLogAmount}" unselectable="false">
						            <f:selectItem itemLabel="letzten 200" itemValue="200" />
						            <f:selectItem itemLabel="letzten 1000" itemValue="1000" />
						            <f:selectItem itemLabel="Alle" itemValue="all" />
						            <p:ajax event="change" listener="#{logBean.updateShowLogAmount}" update="logs logsAmount message"/>
						        </p:selectOneButton>
						    </div>
						</h:form>
				    </div>
				    <div class="ui-g-4">
				    	<h:form>
							<h:panelGroup layout="block" rendered="#{!logBean.enableTypes}">
								<p:commandButton value="Ergebnis einschränken" action="#{logBean.enable}" update="input @form"/>
							</h:panelGroup>
						</h:form>
				    </div>
				</div>
				
				<br/>
				<br/>
				
				<p:inputTextarea id="logs" style="overflow:scroll;width:99%;font-size:12pt" rows="10" value="#{logBean.logs}" readonly="true"/>
				
				<br/><br/>
			</p:panel>
			<br/>
			<div id="bottom">
				<h:link outcome="kontakt" styleClass="ui-link ui-widget" style="font-size:10pt;color:#125100;text-decoration:none;" value="Kontakt"/>
				<p:outputLabel style="font-size:10pt" value=" | "/>
				<h:link outcome="impressum" styleClass="ui-link ui-widget" style="font-size:10pt;color:#125100;text-decoration:none;" value="Impressum"/>
				<p:outputLabel style="font-size:10pt" value=" | "/>
				<h:link outcome="sitemap" styleClass="ui-link ui-widget" style="font-size:10pt;color:#125100;text-decoration:none;" value="Sitemap"/>
				<br/><br/>
				<h:outputText style="font-size:12pt;word-wrap: break-word;" escape="false" value="#{konfig.bottomText}"/>
			</div>
			<br/>
		</div>
	</h:body>
</html>